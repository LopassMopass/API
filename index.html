<!--
    BlogAPI Index File (Blog Display)
-->
    
<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- #MARKER head -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="./style.css"/>
        <script src="./server.js"></script>
        <title>Blog-API</title>
    </head>
    <body>
        <!-- #MARKER body -->
        <h1><b>Posted-Blogs</b></h1>
        <ul id="blog-list">
            <!-- Blog posts will be rendered here -->
        </ul>
        
        <!-- #MARKER Script -->
        <script>
            // Function to fetch and display blogs
            async function fetchAndDisplayBlogs() {
                try {
                    const response = await fetch('http://localhost:3000/api/blogs');
                    
                    if (response.ok) {
                        const blogs = await response.json();
                        const blogList = document.getElementById('blog-list');

                        blogs.forEach(blog => {
                            const blogItem = document.createElement('li');
                            blogItem.textContent = `Title: ${blog.text}, Date: ${blog.date_of_creation}, Author: ${blog.author}`;
                            blogList.appendChild(blogItem);
                        });
                    } else {
                        console.error('Failed to fetch blogs');
                    }
                } catch (error) {
                    console.error('Error fetching blogs:', error);
                }
            }

            // Call the function when the page loads
            window.onload = fetchAndDisplayBlogs;
        </script>
    </body>
</html>
